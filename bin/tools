#!/usr/bin/env node

const fs = require('fs')
const path = require('path')
const dotenv = require('dotenv')
const program = require('commander')

// try to load the .env from the current directory
const env = path.join(process.cwd(), '.env')

if (fs.existsSync(env)) {
  dotenv.config({ path: env })
} else {
  console.warn(
    '\x1b[31m\n',
    'No .env configuration found\n',
    'Please create or move into a workspace',
    '\x1b[0m\n'
  )
}

// register all tools
const tools = ['repository', 'restore', 'snapshot', 'uuids', 'workspace'];

tools.forEach((tool) => {
  require(path.join('../tools/', tool))(program)
})

const argv = program.parse(process.argv)

if (argv.args.length === 0) {
  program.help()
}
